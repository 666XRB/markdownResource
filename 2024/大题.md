# 大题

## 网络访问

![image-20240702194056942](C:/Users/%E8%AE%B8%E9%97%B0%E5%8D%9A/AppData/Roaming/Typora/typora-user-images/image-20240702194056942.png) 

```java


public class ActivityB extends AppCompatActivity {
    private Handler handler = new Handler() {
        @Override
        public void handleMessage(@NonNull Message msg) {
            if (msg.what == 1) {
                String response = (String) msg.obj;
                TextView textView = findViewById(R.id.textView);
                textView.setText(response);
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_b);

        new Thread(new Runnable() {
            @Override
            public void run() {
                -------------------------------
                HttpURLConnection conn = null;
                InputStream is = null;
                
                try {
                    URL url = new URL("https://www.tb.com/book/list");
                    conn = (HttpURLConnection) url.openConnection();
                    conn.setRequestMethod("POST");
                    conn.setDoOutput(true);

                    String postData = "page=1&pagesize=10";
                    OutputStream os = conn.getOutputStream();
                    os.write(postData.getBytes());
                    os.flush();
                    os.close();

                    is = conn.getInputStream();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                    StringBuilder sb = new StringBuilder();
                    String line;
                    while ((line = reader.readLine()) != null) {
                        sb.append(line).append('\n');
                    }

                    String response = sb.toString();
                    Message message = handler.obtainMessage(1, response);
                    handler.sendMessage(message);

                } catch (Exception e) {
                    e.printStackTrace();
                } finally {
                    if (is != null) {
                        try {
                            is.close();
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                    if (conn != null) {
                        conn.disconnect();
                    }
                }
            }
        }).start();
    }
}

```



## JSON解析

![image-20240702201347561](C:/Users/%E8%AE%B8%E9%97%B0%E5%8D%9A/AppData/Roaming/Typora/typora-user-images/image-20240702201347561.png) 

![image-20240702201352903](C:/Users/%E8%AE%B8%E9%97%B0%E5%8D%9A/AppData/Roaming/Typora/typora-user-images/image-20240702201352903.png) 

### 完成 `parseBooks` 方法解析 JSON 字符串

```java
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import java.util.ArrayList;
import java.util.List;

public class ActivityC extends AppCompatActivity {
    private List<Book> books;
    private String str = "..."; // 这里替换为你的 JSON 字符串

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_c);

        books = parseBooks(str); // 解析 JSON 字符串

        -----------------------------
        ListView listView = findViewById(R.id.lv_book);
        BookAdapter adapter = new BookAdapter(this, books);
        listView.setAdapter(adapter);
        -------------------------------

        ----    -------------------------
        listView.setOnItemClickListener(new AdapterView.OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                Book selectedBook = books.get(position);
                // 打开 BookActivity 并传递图书的链接
                Intent intent = new Intent(ActivityC.this, BookActivity.class);
                intent.putExtra("book_link", selectedBook.getLink());
                
                startActivity(intent);
            }
        });
        ----------------------------------------------
    }

    private List<Book> parseBooks(String json) {
        List<Book> bookList = new ArrayList<>();
// JSON 数据中，"result" 是一个对象，包含了一个名为 "list" 的数组。
        try {
            JSONObject jsonObject = new JSONObject(json);//JSONObject 是一个键值对的集合，可以方便地获取和操作 JSON 数据。
            JSONObject resultObject = jsonObject.getJSONObject("result");//从 jsonObject 中获取名为 "result" 的子对象。
            JSONArray bookArray = resultObject.getJSONArray("list");//从 resultObject 中获取名为 "list" 的 JSON 数组

            for (int i = 0; i < bookArray.length(); i++) {
                JSONObject bookObject = bookArray.getJSONObject(i);
                
                String name = bookObject.getString("name");
                String author = bookObject.getString("author");
                double price = bookObject.getDouble("price");
                String link = bookObject.getString("link");

                Book book = new Book(name, author, price, link);
                bookList.add(book);
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
        return bookList;
    }
}

```





### 适配器

```java
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;
import java.util.List;

public class BookAdapter extends BaseAdapter {
    private Context context;
    private List<Book> books;

    public BookAdapter(Context context, List<Book> books) {
        this.context = context;
        this.books = books;
    }

    @Override
    public int getCount() {
        return books.size();
    }

    @Override
    public Object getItem(int position) {
        return books.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    ---------------------------------------9分
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = convertView;
        ViewHolder holder;

        if (view == null) {
            // 如果 convertView 为空，即没有可复用的视图，则创建新的视图
            view = LayoutInflater.from(context).inflate(R.layout.item_book, parent, false);

            // 创建 ViewHolder 对象，并将视图中的控件保存到 ViewHolder 中
            holder = new ViewHolder();
            holder.tvName = view.findViewById(R.id.tv_name);
            holder.tvAuthor = view.findViewById(R.id.tv_author);
            holder.tvPrice = view.findViewById(R.id.tv_price);

            // 将 ViewHolder 对象存储到视图的 Tag 中，以便复用时快速获取
            view.setTag(holder);
        } else {
            // 如果 convertView 不为空，则从 Tag 中获取 ViewHolder 对象
            holder = (ViewHolder) view.getTag();
        }

        // 获取当前位置的 Book 对象
        Book book = books.get(position);

        // 将 Book 对象的数据设置到对应的 TextView 中
        holder.tvName.setText(book.getName());
        holder.tvAuthor.setText(book.getAuthor());
        holder.tvPrice.setText(String.valueOf(book.getPrice()));

        // 返回处理好的视图
        return view;
    }


    static class ViewHolder {
        TextView tvName;
        TextView tvAuthor;
        TextView tvPrice;
    }
}

```





## SharedPreferences

```java
		// 初始化SharedPreferences
SharedPreferences  sharedPreferences = getSharedPreferences("data", Context.MODE_PRIVATE);

		String username = etUsername.getText().toString().trim();
        String password = etPassword.getText().toString().trim();
 		// 保存账号和密码到SharedPreferences
        SharedPreferences.Editor editor = sharedPreferences.edit();
        editor.putString(KEY_USERNAME, username);
        editor.putString(KEY_PASSWORD, password);
        editor.apply();
		// 从SharedPreferences中读取保存的账号和密码并显示
        String savedUsername = sharedPreferences.getString(KEY_USERNAME, "");
        String savedPassword = sharedPreferences.getString(KEY_PASSWORD, "");
        etUsername.setText(savedUsername);
        etPassword.setText(savedPassword);

删除数据 editor.remove("name");
editor.clear();清空数据

```



SQLite;

### 创建一个继承SQLiteOpenHelper的子类

```java
public class DatabaseHelper extends SQLiteOpenHelper {

    private static final String DATABASE_NAME = "books.db";
    private static final int DATABASE_VERSION = 1;

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        // 创建数据库表的 SQL 语句
        String sql = "CREATE TABLE books (" +
                     "_id INTEGER PRIMARY KEY AUTOINCREMENT," +
                     "name TEXT," +
                     "author TEXT," +
                     "price REAL" +
                     ")";
        // 执行 SQL 语句，创建表
        db.execSQL(sql);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // 数据库升级时调用，可以根据需求处理数据库结构的变更
        // 这里简单示例，删除旧表并重新创建
        db.execSQL("DROP TABLE IF EXISTS books");
        onCreate(db);
    }
}

```

### 使用原理？

```java
// 在 Activity 或 Fragment 中使用数据库示例
public class MainActivity extends AppCompatActivity {

    private SQLiteDatabase database;
    private DatabaseHelper dbHelper;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        dbHelper = new DatabaseHelper(this);
        database = dbHelper.getWritableDatabase();

        // 插入数据示例
        insertData("Book A", "Author A", 19.99);

        // 查询数据示例
        List<Book> books = queryBooks();
        // 使用 books 进行后续操作，比如显示在 ListView 中
    }

    private void insertData(String name, String author, double price) {
        ContentValues values = new ContentValues();
        values.put("name", name);
        values.put("author", author);
        values.put("price", price);
        long id = database.insert("books", null, values);
        // 插入成功后 id 为新插入行的行号，或者 -1 表示插入失败
    }

    private List<Book> queryBooks() {
        List<Book> books = new ArrayList<>();
        Cursor cursor = database.query("books", null, null, null, null, null, null);
        if (cursor != null && cursor.moveToFirst()) {
            do {
                String name = cursor.getString(cursor.getColumnIndex("name"));
                String author = cursor.getString(cursor.getColumnIndex("author"));
                double price = cursor.getDouble(cursor.getColumnIndex("price"));
                Book book = new Book(name, author, price);
                books.add(book);
            } while (cursor.moveToNext());
            cursor.close();
        }
        return books;
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        // 关闭数据库连接
        if (database != null) {
            database.close();
        }
        if (dbHelper != null) {
            dbHelper.close();
        }
    }
}

```





# 选择

下列选项中，用于设置画笔是否使用抗锯齿功能的方法是（）。

B、setAntiAlias()

下列选项中，用于将指定的资源id解析为位图的方法是（）。

C、decodeResource()

下面关于Bitmap类的描述，错误的是（）。

B、Config表示位图

下列选项中，用于设置画笔绘制的文字大小的方法是（）。

setTextSize()

下列选项中，用于设置画笔绘制图形的透明度的方法是（）。

D、setAlpha()

---

下列选项中，属于创建服务时必须实现的方法是（）。

B、onBind()

当使用bindService()方法开启服务时，下列选项中关于服务生命周期的描述，正确的是()。

C、onCreate()-onBind()-onUnBind()-onDestroy()

下列选项中，用于在清单文件中配置服务的标签是（）。

A、

/<service/>

下面关于Service的描述，错误的是（）。

B.Service依赖于Activity，当Activity销毁时，Service也被销毁

下列选项中，（）发送消息时，会将消息存储到公共消息区中。

A、自定义广播

下面关于广播的描述，正确的是（）。

A、有序广播可以被接收者拦截

下列选项中，用于注册广播接收者的方法是（）。

A、registerReceiver()

下面关于静态注册广播接收者中Exported属性的描述，正确的是（）。

B、是否接收当前程序之外的广播

下列选项中，用于接收系统广播的组件是（）。

B、BroadcastReceiver

下列选项中，用于注册广播接收者的方法是（）。

A、registerReceiver()

下面关于广播机制的描述，正确的是（）。

C、可以使用广播在不同程序之间进行通信

下列选项中，能观察到系统短信数据库的变化的类是（）。

C、ContentObserver

下列选项中，用于操作手机短信程序暴露的数据的是（）。

A、ContentProvider

下列选项中，用于获取ContentResolver的对象的是（）

D、getContentResolver()



下列选项中，用于在清单文件中注册内容提供者的标签是（）。

A、

/<provider/>

下列选项中，表示任何应用程序都可以通过URI访问ContentProvider的是（）。

B、android:exported="true"



下列选项中，（）的主要组成部分是scheme、authority和path。

C、ContentResolver



下列选项中，用于获取ContentResolver的对象的是（）。

D、getContentResolver()



下列选项中，属于Android自带的一个轻量级数据库的是（）。

A、SQLite



下面关于SQLite数据库的描述中，错误的是（）。

C、每次调用SqliteDatabase的getWritableDatabase()方法时，都会执行SqliteOpenHelper的onCreate()方法



下列选项中，属于在数据库版本号增加时调用的方法是（）。

C、onUpgrade()



下列选项中，用于修改SQLite数据库表中的数据的方法是（）。

B、update()



下列选项中，用于存储String类型的数据到SharedPreferences文件中的方法是（）。

D、putString()



下列选项中，用于删除SharedPreferences文件中的一条数据的方法是（）。

B、clear()



下列选项中，用于获取SharedPreferences类的对象的方法是（）。

C、getSharedPreferences()



下列选项中，用于获取SharedPreferences文件中存储的String类型数据的方法是（）。

A、getString()



下列选项中，用于获取SD卡根目录的方法是（）。

B、getExternalStorageDirectory()

\

下面关于文件存储的描述，正确的是（）。

D、

外部存储的文件可以被其他应用程序所共享



下列选项中，能够读取内部存储文件中数据的类是（）。

A、FileInputStream



下列选项中，不属于Android数据存储方式的是（）。

C、Map



下列选项中，用于获取WebSettings类的对象的方法是（）。

A、getSettings()



下列选项中，不属于JSON数据的是（）。

D、{"abc",12345,false,null}



下列选项中，属于一种轻量级的数据交互格式的是（）。

、B、JSON



下面关于WebView控件的描述，正确的是（）。

A、可以使用loadData()方法加载HTML代码





## jd

```java
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;

private String getString(InputStream is) {
    StringBuilder stringBuilder = new StringBuilder();
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(is));
        String line;
        while ((line = reader.readLine()) != null) {
            stringBuilder.append(line);
        }
        reader.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
    return stringBuilder.toString();
}

private String apiGet(String link, int page, int size) {
    String result = "";
    try {
        URL url = new URL(link + "?page=" + page + "&size=" + size);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        connection.setConnectTimeout(8000);
        connection.setReadTimeout(8000);
        InputStream in = connection.getInputStream();
        result = getString(in);
    } catch (Exception e) {
        e.printStackTrace();
    }
    return result;
}

// Activity中调用代码
new Thread() {
    public void run() {
        String str = apiGet(link, 0, 10);
        Message message = new Message();
        message.what = 1;
        message.obj = str;
        handler.sendMessage(message);
    }
}.start();

// handleMessage方法中
@Override
public void handleMessage(@NonNull Message msg) {
    if (msg.what == 1) {
        String str = (String) msg.obj;
        tv.setText(str);
    }
}

```

